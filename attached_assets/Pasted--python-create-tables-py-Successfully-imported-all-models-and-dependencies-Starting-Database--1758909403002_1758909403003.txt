 python create_tables.py
✓ Successfully imported all models and dependencies
🚀 Starting Database Schema Initialization
============================================================

🔌 Checking database connection...
✓ Database URL configured: postgresql://postgres:12345678@localhost:5432/stud...

📋 Creating enum types...
  Note: (psycopg2.errors.SyntaxError) syntax error at or near "NOT"
LINE 1: CREATE TYPE IF NOT EXISTS attendancestatus AS ENUM ('present...      
                       ^

[SQL: CREATE TYPE IF NOT EXISTS attendancestatus AS ENUM ('present', 'absent', 'late', 'excused');]
(Background on this error at: https://sqlalche.me/e/20/f405)
  Note: (psycopg2.errors.SyntaxError) syntax error at or near "NOT"
LINE 1: CREATE TYPE IF NOT EXISTS feestatus AS ENUM ('pending', 'pai...      
                       ^

[SQL: CREATE TYPE IF NOT EXISTS feestatus AS ENUM ('pending', 'paid', 'overdue', 'cancelled');]
(Background on this error at: https://sqlalche.me/e/20/f405)
  Note: (psycopg2.errors.SyntaxError) syntax error at or near "NOT"
LINE 1: CREATE TYPE IF NOT EXISTS bookstatus AS ENUM ('available', '...      
                       ^

[SQL: CREATE TYPE IF NOT EXISTS bookstatus AS ENUM ('available', 'borrowed', 'reserved', 'damaged');]
(Background on this error at: https://sqlalche.me/e/20/f405)
  Note: (psycopg2.errors.SyntaxError) syntax error at or near "NOT"
LINE 1: CREATE TYPE IF NOT EXISTS userrole AS ENUM ('admin', 'teache...      
                       ^

[SQL: CREATE TYPE IF NOT EXISTS userrole AS ENUM ('admin', 'teacher', 'student', 'parent', 'staff');]
(Background on this error at: https://sqlalche.me/e/20/f405)
✓ Enum types created successfully

🏗️  Creating all database tables...
✓ All tables created successfully
✓ Total tables created: 39

🔍 Verifying table creation...

📊 Database Schema Verification:
Expected tables: 39
Created tables: 39

✅ All expected tables created successfully!

📋 Complete table list:
  - academic_periods
  - alumni
  - announcements
  - assignment_submissions
  - assignments
  - attendance
  - book_borrowings
  - books
  - certificates
  - counseling_sessions
  - courses
  - departments
  - disciplinary_actions
  - documents
  - events
  - exam_results
  - exams
  - fee_types
  - guardians
  - health_records
  - hostel_rooms
  - hostels
  - inventory_categories
  - inventory_items
  - messages
  - report_templates
  - rooms
  - scholarship_applications
  - scholarships
  - staff
  - student_fees
  - student_guardians
  - student_hostel
  - student_transport
  - students
  - teachers
  - timetables
  - transport_routes
  - users

👤 Creating sample admin user...
✗ Error creating admin user: (psycopg2.errors.UndefinedColumn) column users.role does not exist
LINE 1: ...name, users.password_hash AS users_password_hash, users.role...   
                                                             ^

[SQL: SELECT users.id AS users_id, users.email AS users_email, users.username AS users_username, users.password_hash AS users_password_hash, users.role AS users_role, users.first_name AS users_first_name, users.last_name AS users_last_name, users.phone AS users_phone, users.is_active AS users_is_active, users.last_login AS users_last_login, users.profile_picture AS users_profile_picture, users.created_at AS users_created_at, users.updated_at AS users_updated_at
FROM users
WHERE users.email = %(email_1)s
 LIMIT %(param_1)s]
[parameters: {'email_1': 'admin@school.com', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\Hemanth\OneDrive\Desktop\projects\PBL Project - sameer\Student-Records\create_tables.py", line 348, in <module>
    main()
    ~~~~^^
  File "C:\Users\Hemanth\OneDrive\Desktop\projects\PBL Project - sameer\Student-Records\create_tables.py", line 320, in main
    if not create_sample_admin_user():
           ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Hemanth\OneDrive\Desktop\projects\PBL Project - sameer\Student-Records\create_tables.py", line 283, in create_sample_admin_user
    db.session.rollback()
    ~~~~~~~~~~~~~~~~~~~^^
  File "E:\anaconda\Lib\site-packages\sqlalchemy\orm\scoping.py", line 1794, in rollback
    return self._proxied.rollback()
           ^^^^^^^^^^^^^
  File "E:\anaconda\Lib\site-packages\sqlalchemy\orm\scoping.py", line 197, in _proxied
    return self.registry()
           ~~~~~~~~~~~~~^^
  File "E:\anaconda\Lib\site-packages\sqlalchemy\util\_collections.py", line 632, in __call__
    key = self.scopefunc()
  File "E:\anaconda\Lib\site-packages\flask_sqlalchemy\session.py", line 111, in _app_ctx_id
    return id(app_ctx._get_current_object())  # type: ignore[attr-defined]   
              ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "E:\anaconda\Lib\site-packages\werkzeug\local.py", line 519, in _get_current_object
    raise RuntimeError(unbound_message) from None
RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed     
the current application. To solve this, set up an application context        
with app.app_context(). See the documentation for more information.
(base) PS C:\Users\Hemanth\OneDrive\Desktop\projects\PBL Project - sameer\Student-Records>